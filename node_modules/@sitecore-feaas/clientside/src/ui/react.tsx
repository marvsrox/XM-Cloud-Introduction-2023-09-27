export * from './index.js'
import { FEAASComponentProps, parseComponentSource } from './index.js'
import React from 'react'
import { renderHTMLContent } from '../dom/html.js'
export { renderHTMLContent }
export { External } from './FEAASExternal.js'

export function FEAASEmbed({ data, ...props }: FEAASComponentProps<any>) {
  if ('template' in props && typeof props.template == 'string') {
    var html = renderHTMLContent(props.template, data || {})
  }
  if ('src' in props) {
    props = {
      ...parseComponentSource(props.src),
      ...props
    }
  }
  return (
    <feaas-component
      {...props}
      template={null}
      data={typeof data == 'string' ? data : data ? JSON.stringify(data) : null}
      dangerouslySetInnerHTML={{ __html: html || '' }}
    />
  )
}

export const Component = FEAASEmbed
